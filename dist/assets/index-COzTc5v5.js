var is=Object.defineProperty,as=Object.defineProperties;var rs=Object.getOwnPropertyDescriptors;var je=Object.getOwnPropertySymbols;var ls=Object.prototype.hasOwnProperty,os=Object.prototype.propertyIsEnumerable;var Ne=(v,u,j)=>u in v?is(v,u,{enumerable:!0,configurable:!0,writable:!0,value:j}):v[u]=j,ee=(v,u)=>{for(var j in u||(u={}))ls.call(u,j)&&Ne(v,j,u[j]);if(je)for(var j of je(u))os.call(u,j)&&Ne(v,j,u[j]);return v},ve=(v,u)=>as(v,rs(u));import{r as f,a as cs,R as ds}from"./react-vendor-DbiWhUg4.js";import{U as se,S as hs,a as ye,b as ms,A as xs,c as we,L as Se,T as Ce,C as te,D as us,F as gs}from"./lucide-BEsfzm0p.js";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))y(g);new MutationObserver(g=>{for(const N of g)if(N.type==="childList")for(const w of N.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&y(w)}).observe(document,{childList:!0,subtree:!0});function j(g){const N={};return g.integrity&&(N.integrity=g.integrity),g.referrerPolicy&&(N.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?N.credentials="include":g.crossOrigin==="anonymous"?N.credentials="omit":N.credentials="same-origin",N}function y(g){if(g.ep)return;g.ep=!0;const N=j(g);fetch(g.href,N)}})();var Ae={exports:{}},q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ps=f,fs=Symbol.for("react.element"),bs=Symbol.for("react.fragment"),js=Object.prototype.hasOwnProperty,Ns=ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vs={key:!0,ref:!0,__self:!0,__source:!0};function Pe(v,u,j){var y,g={},N=null,w=null;j!==void 0&&(N=""+j),u.key!==void 0&&(N=""+u.key),u.ref!==void 0&&(w=u.ref);for(y in u)js.call(u,y)&&!vs.hasOwnProperty(y)&&(g[y]=u[y]);if(v&&v.defaultProps)for(y in u=v.defaultProps,u)g[y]===void 0&&(g[y]=u[y]);return{$$typeof:fs,type:v,key:N,ref:w,props:g,_owner:Ns.current}}q.Fragment=bs;q.jsx=Pe;q.jsxs=Pe;Ae.exports=q;var e=Ae.exports,ne={},Ee=cs;ne.createRoot=Ee.createRoot,ne.hydrateRoot=Ee.hydrateRoot;const ys=()=>{var be;const[v,u]=f.useState(null),[j,y]=f.useState([]),[g,N]=f.useState([]),[w,z]=f.useState(new Set),[D,M]=f.useState("upload"),[ie,ae]=f.useState(""),[B,G]=f.useState(new Map),[k,H]=f.useState(null),[p,R]=f.useState(null),[V,re]=f.useState(""),[_,le]=f.useState(80),[E,oe]=f.useState([]),[ce,T]=f.useState(0),[Y,de]=f.useState(new Set),[Te,O]=f.useState(!1),[A,$]=f.useState("clusters"),[J,he]=f.useState(80),[I,X]=f.useState(new Set),[S,me]=f.useState([]),[P,F]=f.useState(new Set),[L,xe]=f.useState([]),[C,ue]=f.useState(null),K="1.9.0",Ie=[{version:"1.9.0",date:"28 d√©cembre 2025",tag:"ACTUELLE",color:"green",title:"Restauration onglets Isol√©s et Suggestions IA",items:['Restauration onglet "Isol√©s" pour individus sans famille','Restauration onglet "Suggestions IA" avec analyse patterns',"D√©tection individus sans parents ET sans enfants","S√©lection en masse des isol√©s (tout/rien/totalement isol√©s)","Suggestions intelligentes bas√©es sur patterns nom/p√©riode","Normalisation automatique des lieux (retrait codes INSEE)","Contr√¥les d'int√©grit√© avanc√©s","Score de confiance pour suggestions IA (60-95%)"]},{version:"1.8.7",date:"24 d√©cembre 2025",tag:null,color:"blue",title:"Version compl√®te avec toutes les corrections",items:["Restauration bouton Changelog/Nouveaut√©s avec modal compl√®te","Restauration syst√®me d'onglets Clusters/Doublons simples","Ajout scoring moyen des clusters avec jauges visuelles","Ajout filtre pourcentage minimum pour clusters","Ajout s√©lection automatique clusters ‚â•95%"]},{version:"1.8.6",date:"16 d√©cembre 2025",tag:null,color:"indigo",title:"Corrections GEDCOM et g√©n√©ration HEAD/TRLR",items:["Correction gestion balises CONT/CONC multi-lignes","G√©n√©ration automatique en-t√™te HEAD complet","G√©n√©ration automatique balise TRLR de fin","Am√©lioration compatibilit√© avec logiciels g√©n√©alogie"]},{version:"1.4.0",date:"5 d√©cembre 2025",tag:null,color:"purple",title:"Organisation interface et contr√¥le int√©grit√©",items:["Syst√®me d'onglets s√©parant Clusters et Doublons simples","Scoring moyen des clusters avec jauges color√©es","Auto-s√©lection clusters haute confiance (‚â•95%)","Filtre pourcentage pour masquer clusters sous seuil"]},{version:"1.0.0",date:"1 d√©cembre 2025",tag:"INITIALE",color:"gray",title:"Version initiale",items:["Parseur GEDCOM complet","D√©tection intelligente avec Soundex fran√ßais","Syst√®me de scoring hybride 9 crit√®res","Fusion s√©curis√©e sans perte de donn√©es","Interface React moderne et responsive"]}],De={catherine:["katherine","cathrine","katrine","caterine"],jean:["jehan","johan","joan"],marie:["maria","mary","mari"],pierre:["peter","pedro","piere"],jacques:["james","jacob","jacque"],fran√ßois:["francis","francois","fransois"],louis:["lewis","luis","loui"],anne:["ann","anna","ane"],marguerite:["margaret","margueritte","margarite"],nicolas:["nicholas","nicola","nikolas"],guillaume:["william","guilaume","guillem"],antoine:["anthony","antoin","antonio"],michel:["michael","mickael","miguel"],philippe:["philip","philipe","filippe"],charles:["carl","carlos","charle"],henri:["henry","henrie","enri"],joseph:["josef","josephe","jose"],claude:["claudio","claudius","claud"],etienne:["stephen","estienne","steven"],gabriel:["gabrielle","gabryel","gabreil"],laurent:["lawrence","laurens","lorent"],matthieu:["matthew","mathieu","matieu"],paul:["pablo","paulo","paule"],simon:["simeon","symon","simone"],thomas:["tomas","thoma","tomaso"],vincent:["vincenzo","vicent","vincentius"],andr√©:["andrew","andreas","andre"],bernard:["bernhard","bernardus","bernar"],denis:["dennis","denys","dionysius"],georges:["george","jorge","georg"],germain:["germaine","german","jermain"],gilles:["giles","gil","aegidius"],hugues:["hugo","hugh","hug"],martin:["martinus","marten","martine"],rene:["renatus","renee","ren√°"],robert:["roberto","rupert","rober"],sebastien:["sebastian","sebastianus","bastien"],therese:["teresa","theresia","terese"],victor:["viktor","victoire","vittorio"],xavier:["javier","xaver","saverio"]},ke=s=>s?s.replace(/^\d{1,5}\s+/,"").trim():"",Re=s=>{if(!s)return"";const t=s.toLowerCase().trim();for(const[a,i]of Object.entries(De))if(t===a||i.includes(t))return a;return t},U=s=>{if(!s)return"";let t=s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z]/g,"");if(t.length===0)return"";t=Re(t)||t;const a=t[0];let i=t.replace(/[aeiouyhw]/g,"0").replace(/[bfpv]/g,"1").replace(/[cgjkqsxz]/g,"2").replace(/[dt]/g,"3").replace(/[l]/g,"4").replace(/[mn]/g,"5").replace(/[r]/g,"6"),n=a;for(let l=1;l<i.length&&n.length<4;l++)i[l]!=="0"&&i[l]!==i[l-1]&&(n+=i[l]);return n.padEnd(4,"0").toUpperCase()},Le=s=>{const t=s.split(`
`),a=[],i=new Map;let n=null,l=null,m=null,h=null;return t.forEach(c=>{const o=c.trim();if(n&&(o.startsWith("2 CONT ")||o.startsWith("2 CONC "))){const r=o.startsWith("2 CONT "),d=o.split(r?"2 CONT ":"2 CONC ")[1]||"",x=r?`
`:"";h==="NAME"&&n.names.length>0?n.names[n.names.length-1]+=x+d:h==="BIRT_DATE"?n.birth+=x+d:h==="BIRT_PLAC"?n.birthPlace+=x+d:h==="DEAT_DATE"?n.death+=x+d:h==="DEAT_PLAC"?n.deathPlace+=x+d:h==="OCCU"&&(n.occupation+=x+d);return}if(o.startsWith("0")&&o.includes("INDI")){n&&a.push(n);const r=o.match(/@([^@]+)@/);n={id:r?r[1]:`INDI${a.length}`,names:[],birth:"",birthPlace:"",death:"",deathPlace:"",sex:"",occupation:"",parents:[],spouses:[],rawLines:[c]},l=null,m=null,h=null}else if(o.startsWith("0")&&o.includes("FAM")){n&&(a.push(n),n=null);const r=o.match(/@([^@]+)@/),d=r?r[1]:`FAM${i.size}`;l={id:d,husband:null,wife:null,children:[]},i.set(d,l),m=null}else if(o.startsWith("0"))n&&(a.push(n),n=null),l=null,m=null;else if(n){if(n.rawLines.push(c),o.startsWith("1 NAME "))n.names.push(o.split("1 NAME ")[1].replace(/\//g,"").trim()),h="NAME";else if(o.startsWith("1 SEX "))n.sex=o.split("1 SEX ")[1].trim();else if(o.startsWith("1 BIRT"))m="BIRT";else if(o.startsWith("1 DEAT"))m="DEAT";else if(o.startsWith("1 OCCU "))n.occupation=o.split("1 OCCU ")[1].trim(),h="OCCU";else if(o.startsWith("1 FAMC ")){const r=o.match(/@([^@]+)@/);r&&n.parents.push(r[1])}else if(o.startsWith("1 FAMS ")){const r=o.match(/@([^@]+)@/);r&&n.spouses.push(r[1])}else if(o.startsWith("2 DATE ")&&m){const r=o.split("2 DATE ")[1].trim();m==="BIRT"?(n.birth=r,h="BIRT_DATE"):m==="DEAT"&&(n.death=r,h="DEAT_DATE")}else if(o.startsWith("2 PLAC ")&&m){const r=ke(o.split("2 PLAC ")[1].trim());m==="BIRT"?(n.birthPlace=r,h="BIRT_PLAC"):m==="DEAT"&&(n.deathPlace=r,h="DEAT_PLAC")}}else if(l){if(o.startsWith("1 HUSB ")){const r=o.match(/@([^@]+)@/);r&&(l.husband=r[1])}else if(o.startsWith("1 WIFE ")){const r=o.match(/@([^@]+)@/);r&&(l.wife=r[1])}else if(o.startsWith("1 CHIL ")){const r=o.match(/@([^@]+)@/);r&&l.children.push(r[1])}}}),n&&a.push(n),i.forEach(c=>{const o=[c.husband,c.wife].filter(Boolean);if(c.children.forEach(r=>{const d=a.find(x=>x.id===r);d&&o.forEach(x=>{d.parents.includes(x)||d.parents.push(x)})}),c.husband&&c.wife){const r=a.find(x=>x.id===c.husband),d=a.find(x=>x.id===c.wife);r&&!r.spouses.includes(c.wife)&&r.spouses.push(c.wife),d&&!d.spouses.includes(c.husband)&&d.spouses.push(c.husband)}}),{people:a,families:i}},Me=(s,t,a)=>{let i=0,n=0;const l=[];if(s.sex&&t.sex)if(n+=15,s.sex===t.sex)i+=15,l.push({criterion:"Sexe",match:!0,score:15});else return{score:0,details:[{criterion:"Sexe",match:!1,score:0,note:"√âliminatoire"}]};if(s.names.length>0&&t.names.length>0){n+=30;const r=s.names.map(b=>U(b)),d=t.names.map(b=>U(b));r.some(b=>d.some(Z=>b===Z))?(i+=30,l.push({criterion:"Noms (Soundex+variantes)",match:!0,score:30})):l.push({criterion:"Noms (Soundex+variantes)",match:!1,score:0})}if(s.birth&&t.birth){n+=25;const r=s.birth.match(/\d{4}/),d=t.birth.match(/\d{4}/);if(r&&d){const x=Math.abs(parseInt(r[0])-parseInt(d[0]));x===0?(i+=25,l.push({criterion:"Ann√©e naissance",match:!0,score:25,note:"Identique"})):x<=2?(i+=15,l.push({criterion:"Ann√©e naissance",match:!0,score:15,note:`¬±${x} an(s)`})):l.push({criterion:"Ann√©e naissance",match:!1,score:0})}}if(s.parents.length>0&&t.parents.length>0){n+=20;const r=s.parents.filter(d=>t.parents.includes(d));r.length>0?(i+=20,l.push({criterion:"Parents",match:!0,score:20,note:`${r.length} commun(s)`})):l.push({criterion:"Parents",match:!1,score:0})}const m=r=>{const d=new Set;return a.forEach(x=>{x.id!==r.id&&r.parents.some(b=>x.parents.includes(b))&&d.add(x.id)}),d},h=m(s),c=m(t);if(h.size>0&&c.size>0){n+=15;const r=[...h].filter(d=>c.has(d));r.length>0&&(i+=15,l.push({criterion:"Fratrie",match:!0,score:15,note:`${r.length} commun(s)`}))}if(s.death&&t.death){n+=15;const r=s.death.match(/\d{4}/),d=t.death.match(/\d{4}/);r&&d&&Math.abs(parseInt(r[0])-parseInt(d[0]))<=2&&(i+=15,l.push({criterion:"Ann√©e d√©c√®s",match:!0,score:15}))}return s.birthPlace&&t.birthPlace&&(n+=10,s.birthPlace.toLowerCase()===t.birthPlace.toLowerCase()&&(i+=10,l.push({criterion:"Lieu naissance",match:!0,score:10}))),s.spouses.length>0&&t.spouses.length>0&&(n+=8,s.spouses.filter(d=>t.spouses.includes(d)).length>0&&(i+=8,l.push({criterion:"Conjoints",match:!0,score:8}))),s.occupation&&t.occupation&&(n+=5,s.occupation.toLowerCase()===t.occupation.toLowerCase()&&(i+=5,l.push({criterion:"Profession",match:!0,score:5}))),{score:n>0?Math.round(i/n*100):0,details:l}},Oe=s=>{const t=[],a=new Map,i=new Map,n=new Map;s.forEach(c=>{var r,d;c.names.forEach(x=>{const b=U(x);a.has(b)||a.set(b,[]),a.get(b).push(c)});const o=(d=(r=c.birth)==null?void 0:r.match(/\d{4}/))==null?void 0:d[0];o&&[-2,-1,0,1,2].forEach(x=>{const b=String(parseInt(o)+x);i.has(b)||i.set(b,[]),i.get(b).push(c)}),c.parents.forEach(x=>{n.has(x)||n.set(x,[]),n.get(x).push(c)})});const l=new Set,m=[];a.forEach(c=>{for(let o=0;o<c.length;o++)for(let r=o+1;r<c.length;r++){const d=[c[o].id,c[r].id].sort().join("-");l.has(d)||(l.add(d),m.push([c[o],c[r]]))}}),n.forEach(c=>{for(let o=0;o<c.length;o++)for(let r=o+1;r<c.length;r++){const d=[c[o].id,c[r].id].sort().join("-");l.has(d)||(l.add(d),m.push([c[o],c[r]]))}}),m.forEach(([c,o])=>{const r=Me(c,o,s);r.score>=80&&t.push({id:`${c.id}-${o.id}`,person1:c,person2:o,similarity:r.score,details:r.details})}),t.sort((c,o)=>o.similarity-c.similarity);const h=$e(t,s);return oe(h),t},$e=(s,t)=>{const a=new Map,i=[];return s.forEach(n=>{const l=n.person1.id,m=n.person2.id,h=a.get(l),c=a.get(m);if(!h&&!c){const o={people:new Set([l,m]),pairs:[n]};i.push(o),a.set(l,o),a.set(m,o)}else if(h&&!c)h.people.add(m),h.pairs.push(n),a.set(m,h);else if(!h&&c)c.people.add(l),c.pairs.push(n),a.set(l,c);else if(h!==c){c.people.forEach(r=>{h.people.add(r),a.set(r,h)}),h.pairs.push(...c.pairs,n);const o=i.indexOf(c);o>-1&&i.splice(o,1)}else h.pairs.push(n)}),i.filter(n=>n.people.size>=3).map(n=>{const l=[...n.people].map(h=>t.find(c=>c.id===h)).filter(Boolean),m=n.pairs.length>0?Math.round(n.pairs.reduce((h,c)=>h+c.similarity,0)/n.pairs.length):0;return{people:l,pairs:n.pairs,avgScore:m}}).sort((n,l)=>l.avgScore-n.avgScore)},Fe=(s,t)=>{const a=new Map;t.forEach(n=>{n.children.forEach(l=>{n.husband&&(a.has(n.husband)||a.set(n.husband,new Set),a.get(n.husband).add(l)),n.wife&&(a.has(n.wife)||a.set(n.wife,new Set),a.get(n.wife).add(l))})});const i=[];return s.forEach(n=>{const l=n.parents.length>0,m=a.has(n.id)&&a.get(n.id).size>0,h=n.spouses.length>0;!l&&!m&&i.push(ve(ee({},n),{hasSpouses:h,isTotallyIsolated:!h}))}),i},ze=s=>{const t=[],a=new Map;return s.forEach(i=>{var c,o;if(i.names.length===0)return;const n=U(i.names[0]),l=(o=(c=i.birth)==null?void 0:c.match(/\d{4}/))==null?void 0:o[0],m=l?Math.floor(parseInt(l)/25)*25:null,h=`${n}-${m||"unknown"}`;a.has(h)||a.set(h,{people:[],name:i.names[0],period:m?`${m}-${m+25}`:"P√©riode inconnue"}),a.get(h).people.push(i)}),a.forEach((i,n)=>{if(i.people.length>=3){let l=60;const m=i.people.map(d=>{var x;return(x=d.birthPlace)==null?void 0:x.toLowerCase()}).filter(Boolean),h=new Set(m);h.size===1&&m.length>=2&&(l+=15);const c=i.people.flatMap(d=>d.parents),o={};c.forEach(d=>{o[d]=(o[d]||0)+1});const r=Object.values(o).some(d=>d>=2);r&&(l+=20),i.people.length>5&&(l-=10),l=Math.min(95,Math.max(60,l)),t.push({id:n,name:i.name,period:i.period,people:i.people,count:i.people.length,confidence:l,reason:_e(i,r,h.size===1)})}}),t.sort((i,n)=>n.confidence-i.confidence),t},_e=(s,t,a)=>{const i=[`${s.people.length} personnes avec le m√™me nom dans la p√©riode ${s.period}`];return t&&i.push("Parents communs d√©tect√©s"),a&&i.push("M√™me lieu de naissance"),i.join(". ")},Ue=(s,t)=>{const a={critical:[],warnings:[],info:[]};return s.forEach(i=>{var n,l,m,h;if((i.names.length===0||!((n=i.names[0])!=null&&n.trim()))&&a.warnings.push({type:"NO_NAME",person:i,message:`Individu ${i.id} sans nom renseign√©`}),i.birth&&i.death){const c=(l=i.birth.match(/\d{4}/))==null?void 0:l[0],o=(m=i.death.match(/\d{4}/))==null?void 0:m[0];c&&o&&parseInt(c)>parseInt(o)&&a.critical.push({type:"BIRTH_AFTER_DEATH",person:i,message:`${i.names[0]||i.id}: naissance (${c}) apr√®s d√©c√®s (${o})`})}if(i.birth&&i.parents.length>0){const c=parseInt((h=i.birth.match(/\d{4}/))==null?void 0:h[0]);c&&i.parents.forEach(o=>{var d;const r=s.find(x=>x.id===o);if(r!=null&&r.birth){const x=parseInt((d=r.birth.match(/\d{4}/))==null?void 0:d[0]);if(x){const b=c-x;b<15?a.critical.push({type:"PARENT_TOO_YOUNG",person:i,parent:r,message:`${r.names[0]||r.id} avait ${b} ans √† la naissance de ${i.names[0]||i.id}`}):b>80&&a.warnings.push({type:"PARENT_TOO_OLD",person:i,parent:r,message:`${r.names[0]||r.id} avait ${b} ans √† la naissance de ${i.names[0]||i.id}`})}}})}}),a},Q=s=>s.avgScore||0,ge=()=>E.filter(s=>Q(s)>=J),We=()=>{const s=new Set;E.forEach((t,a)=>{Q(t)>=95&&s.add(a)}),X(s)},qe=s=>{const t=new Set(Y);t.has(s)?t.delete(s):t.add(s),de(t)},Be=()=>{F(new Set(S.map(s=>s.id)))},Ge=()=>{F(new Set(S.filter(s=>s.isTotallyIsolated).map(s=>s.id)))},He=()=>{F(new Set)},Ve=s=>{const t=new Set(P);t.has(s)?t.delete(s):t.add(s),F(t)},Ye=()=>{if(P.size===0)return;const s=`√ätes-vous s√ªr de vouloir supprimer ${P.size} individu(s) isol√©(s) ?

Cette action est irr√©versible.`;if(!window.confirm(s))return;const t=new Set(P);t.forEach(a=>{B.set(a,"DELETED")}),G(new Map(B)),H({totalIndividuals:j.length,mergedCount:0,deletedCount:t.size,remainingCount:j.length-t.size}),M("merged")},pe=s=>{let t=0;return s.names.length>0&&s.names[0]&&(t+=20),s.birth&&(t+=20),s.birthPlace&&(t+=15),s.death&&(t+=15),s.deathPlace&&(t+=10),s.sex&&(t+=10),s.occupation&&(t+=10),t},Je=(s,t)=>{const a=ee({},s);return!a.names[0]&&t.names[0]&&(a.names=[...t.names]),!a.birth&&t.birth&&(a.birth=t.birth),!a.birthPlace&&t.birthPlace&&(a.birthPlace=t.birthPlace),!a.death&&t.death&&(a.death=t.death),!a.deathPlace&&t.deathPlace&&(a.deathPlace=t.deathPlace),!a.sex&&t.sex&&(a.sex=t.sex),!a.occupation&&t.occupation&&(a.occupation=t.occupation),a},Xe=s=>{const t=pe(s.person1),a=pe(s.person2),i=t>=a?s.person1:s.person2,n=i===s.person1?s.person2:s.person1,l=Je(i,n);R({original:s,keepPerson:i,removePerson:n,merged:l,quality1:t,quality2:a})},Ke=s=>{const t=s.target.files[0];if(!t)return;M("analyzing"),T(0);const a=new FileReader;a.onload=i=>{const n=i.target.result;ae(n),setTimeout(()=>{const{people:l,families:m}=Le(n);y(l),T(30),setTimeout(()=>{const h=Oe(l);N(h),T(60);const c=Fe(l,m);me(c),T(75);const o=ze(l);xe(o),T(90);const r=Ue(l);ue(r),T(100),setTimeout(()=>M("review"),500)},100)},100)},a.readAsText(t)},fe=s=>{const t=new Set(w);t.has(s)?t.delete(s):t.add(s),z(t)},Qe=()=>{const s=g.filter(t=>t.similarity>=95).map(t=>t.id);z(new Set(s))},Ze=()=>{const s=W().map(t=>t.id);z(new Set(s))},W=()=>{let s=g.filter(t=>t.similarity>=_);if(V.trim()){const t=V.toLowerCase();s=s.filter(a=>{var i,n;return((i=a.person1.names[0])==null?void 0:i.toLowerCase().includes(t))||((n=a.person2.names[0])==null?void 0:n.toLowerCase().includes(t))||a.person1.id.toLowerCase().includes(t)||a.person2.id.toLowerCase().includes(t)})}return s},es=()=>{const s=new Map;w.forEach(a=>{const i=g.find(n=>n.id===a);if(i){const n=i.person1.id,l=i.person2.id;let m=n;s.has(n)?m=s.get(n):s.has(l)&&(m=s.get(l)),s.set(n,m),s.set(l,m)}}),I.forEach(a=>{const i=E[a];if(i&&i.people.length>0){const n=i.people[0].id;i.people.forEach(l=>{s.set(l.id,n)})}}),G(s);const t=new Set;s.forEach((a,i)=>{i!==a&&t.add(i)}),H({totalIndividuals:j.length,mergedCount:t.size,remainingCount:j.length-t.size}),M("merged")},ss=()=>{if(!ie)return;const s=new Set,t=new Map;B.forEach((r,d)=>{d!==r&&r!=="DELETED"?(s.add(d),t.set(d,r)):r==="DELETED"&&s.add(d)});const a=ie.split(`
`),i=[];let n=!1,l=!1,m=!1;if(a.length>0&&a[0].trim().startsWith("0 HEAD")&&(l=!0),a.length>0){const r=a.filter(d=>d.trim()).pop();r&&r.trim().startsWith("0 TRLR")&&(m=!0)}if(!l){i.push("0 HEAD"),i.push("1 SOUR GedcomMerger"),i.push(`2 VERS ${K}`),i.push("2 NAME Fusionneur de Doublons GEDCOM"),i.push("1 GEDC"),i.push("2 VERS 5.5.1"),i.push("2 FORM LINEAGE-LINKED"),i.push("1 CHAR UTF-8");const r=new Date,d=`${r.getDate()} ${["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"][r.getMonth()]} ${r.getFullYear()}`;i.push(`1 DATE ${d}`)}a.forEach(r=>{const d=r.trim();if(d.startsWith("0")&&d.includes("@")){const x=d.match(/@([^@]+)@/);if(x&&s.has(x[1])){n=!0;return}n=!1}if(!n){let x=r;t.forEach((b,Z)=>{const ns=new RegExp(`@${Z}@`,"g");x=x.replace(ns,`@${b}@`)}),i.push(x)}}),m||i.push("0 TRLR");const h=new Blob([i.join(`
`)],{type:"text/plain"}),c=URL.createObjectURL(h),o=document.createElement("a");o.href=c,o.download=`gedcom_nettoye_v${K}.ged`,o.click(),URL.revokeObjectURL(c)},ts=()=>{u(null),y([]),N([]),z(new Set),M("upload"),ae(""),G(new Map),H(null),R(null),re(""),le(80),oe([]),T(0),de(new Set),O(!1),$("clusters"),he(80),X(new Set),me([]),F(new Set),xe([]),ue(null)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4 md:p-8",children:[e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-500 p-6 md:p-8 text-white",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(se,{className:"w-10 h-10 md:w-12 md:h-12"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold",children:["Fusionneur GEDCOM v",K]}),e.jsxs("button",{onClick:()=>O(!0),className:"bg-white/20 hover:bg-white/30 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-2 text-sm",title:"Voir les nouveaut√©s",children:[e.jsx(hs,{className:"w-4 h-4"}),"Nouveaut√©s"]})]}),e.jsx("p",{className:"text-indigo-100 mt-2",children:"Nettoyez votre arbre g√©n√©alogique"})]})]}),(D==="review"||D==="merged")&&e.jsxs("button",{onClick:ts,className:"bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5"}),"Nouveau"]})]})}),e.jsxs("div",{className:"p-4 md:p-8",children:[D==="upload"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ye,{className:"w-20 h-20 md:w-24 md:h-24 mx-auto text-indigo-400 mb-6"}),e.jsx("h2",{className:"text-xl md:text-2xl font-semibold mb-4",children:"T√©l√©chargez votre fichier GEDCOM"}),e.jsxs("label",{children:[e.jsx("input",{type:"file",accept:".ged,.gedcom",onChange:Ke,className:"hidden"}),e.jsx("span",{className:"bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-4 rounded-xl cursor-pointer inline-block font-semibold transition-colors text-lg",children:"S√©lectionner un fichier"})]}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Formats accept√©s : .ged, .gedcom"})]}),D==="analyzing"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"w-20 h-20 md:w-24 md:h-24 mx-auto mb-6 relative",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-200 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-4 border-indigo-600 rounded-full border-t-transparent animate-spin"})]}),e.jsx("h2",{className:"text-xl md:text-2xl font-semibold mb-4",children:"Analyse en cours..."}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${ce}%`}})}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[ce,"%"]})]})]}),D==="review"&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl md:text-3xl font-bold text-blue-600",children:j.length}),e.jsx("p",{className:"text-sm text-blue-800",children:"Individus"})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl md:text-3xl font-bold text-orange-600",children:E.length}),e.jsx("p",{className:"text-sm text-orange-800",children:"Clusters"})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl md:text-3xl font-bold text-yellow-600",children:g.length}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Doublons"})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl md:text-3xl font-bold text-red-600",children:S.length}),e.jsx("p",{className:"text-sm text-red-800",children:"Isol√©s"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[e.jsx("p",{className:"text-2xl md:text-3xl font-bold text-purple-600",children:L.length}),e.jsx("p",{className:"text-sm text-purple-800",children:"Suggestions IA"})]})]}),C&&(C.critical.length>0||C.warnings.length>0)&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ms,{className:"w-5 h-5 text-red-600"}),e.jsx("h3",{className:"font-semibold text-red-800",children:"Alertes d'int√©grit√©"})]}),C.critical.length>0&&e.jsxs("div",{className:"text-sm text-red-700",children:[e.jsxs("strong",{children:[C.critical.length," erreur(s) critique(s)"]})," : ",(be=C.critical[0])==null?void 0:be.message,C.critical.length>1&&` et ${C.critical.length-1} autre(s)`]}),C.warnings.length>0&&e.jsx("div",{className:"text-sm text-orange-700 mt-1",children:e.jsxs("strong",{children:[C.warnings.length," avertissement(s)"]})})]}),(g.length>0||E.length>0||S.length>0||L.length>0)&&e.jsx("div",{className:"mb-6",children:e.jsxs("nav",{className:"flex flex-wrap border-b border-gray-200",children:[e.jsx("button",{onClick:()=>$("clusters"),className:`flex-1 min-w-[120px] px-4 py-3 font-medium text-sm transition-colors ${A==="clusters"?"border-b-2 border-orange-600 text-orange-600 bg-orange-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Clusters"})," (",E.length,")"]})}),e.jsx("button",{onClick:()=>$("pairs"),className:`flex-1 min-w-[120px] px-4 py-3 font-medium text-sm transition-colors ${A==="pairs"?"border-b-2 border-indigo-600 text-indigo-600 bg-indigo-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Doublons"})," (",g.length,")"]})}),e.jsx("button",{onClick:()=>$("isolated"),className:`flex-1 min-w-[120px] px-4 py-3 font-medium text-sm transition-colors ${A==="isolated"?"border-b-2 border-red-600 text-red-600 bg-red-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Isol√©s"})," (",S.length,")"]})}),e.jsx("button",{onClick:()=>$("suggestions"),className:`flex-1 min-w-[120px] px-4 py-3 font-medium text-sm transition-colors ${A==="suggestions"?"border-b-2 border-purple-600 text-purple-600 bg-purple-50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"IA"})," (",L.length,")"]})})]})}),A==="clusters"&&E.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 bg-white border-2 border-gray-200 rounded-lg p-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Score moyen minimum: ",J,"%"]}),e.jsx("input",{type:"range",min:"80",max:"100",value:J,onChange:s=>he(parseInt(s.target.value)),className:"w-full"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-3",children:[ge().length," cluster(s) affich√©(s)"]})]})}),e.jsxs("div",{className:"mb-6 flex gap-4 flex-wrap",children:[e.jsx("button",{onClick:We,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-lg font-medium",children:"S√©lectionner ‚â•95%"}),e.jsxs("span",{className:"text-sm text-gray-600 py-2",children:[I.size," cluster(s) s√©lectionn√©(s)"]})]}),e.jsx("div",{className:"space-y-4",children:ge().map((s,t)=>{const a=E.indexOf(s),i=Q(s);return e.jsxs("div",{className:`border-2 rounded-lg p-4 ${I.has(a)?"border-indigo-500 bg-indigo-50":"border-orange-300 bg-orange-50"}`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:I.has(a),onChange:()=>{const n=new Set(I);n.has(a)?n.delete(a):n.add(a),X(n)},className:"w-5 h-5 text-indigo-600"}),e.jsx(se,{className:"w-6 h-6 text-orange-600"}),e.jsxs("h3",{className:"font-semibold text-orange-900",children:["Cluster #",a+1," ‚Äî ",s.people.length," personnes"]}),e.jsxs("span",{className:`px-2 py-1 rounded text-sm font-medium ${i>=95?"bg-green-200 text-green-800":i>=90?"bg-yellow-200 text-yellow-800":"bg-orange-200 text-orange-800"}`,children:[i,"%"]})]}),e.jsx("button",{onClick:()=>qe(a),className:"text-sm text-orange-700 hover:text-orange-900",children:Y.has(a)?"‚ñ≤ Masquer":"‚ñº Voir d√©tails"})]}),Y.has(a)&&e.jsx("div",{className:"border-t border-orange-200 pt-3 mt-3",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-orange-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left",children:"#"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Nom"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"Naissance"}),e.jsx("th",{className:"px-3 py-2 text-left",children:"ID"})]})}),e.jsx("tbody",{className:"divide-y",children:s.people.map((n,l)=>e.jsxs("tr",{className:"hover:bg-orange-100",children:[e.jsx("td",{className:"px-3 py-2",children:l+1}),e.jsx("td",{className:"px-3 py-2 font-medium",children:n.names[0]||"Sans nom"}),e.jsx("td",{className:"px-3 py-2",children:n.birth||"-"}),e.jsx("td",{className:"px-3 py-2 font-mono text-xs",children:n.id})]},l))})]})})})]},a)})})]}),A==="clusters"&&E.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucun cluster d√©tect√© (groupes de 3+ personnes similaires)"}),A==="pairs"&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 bg-white border-2 border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rechercher"}),e.jsx("input",{type:"text",value:V,onChange:s=>re(s.target.value),placeholder:"Nom ou ID",className:"w-full px-4 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Score min: ",_,"%"]}),e.jsx("input",{type:"range",min:"80",max:"100",value:_,onChange:s=>le(parseInt(s.target.value)),className:"w-full"})]})]})}),e.jsxs("div",{className:"mb-6 flex gap-4 flex-wrap",children:[e.jsx("button",{onClick:Qe,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-medium",children:"S√©lectionner ‚â•95%"}),e.jsxs("button",{onClick:Ze,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg font-medium",children:["S√©lectionner tout (‚â•",_,"%)"]}),e.jsxs("span",{className:"text-sm text-gray-600 py-2",children:[w.size," paire(s) s√©lectionn√©e(s) sur ",W().length]})]}),e.jsx("div",{className:"space-y-3",children:W().map(s=>e.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${w.has(s.id)?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>fe(s.id),children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:w.has(s.id),onChange:()=>{},className:"w-5 h-5 text-indigo-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[s.person1.names[0]||"Sans nom"," ‚Üî ",s.person2.names[0]||"Sans nom"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.person1.birth||"?"," ‚Ä¢ ",s.person2.birth||"?"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.similarity>=95?"bg-green-100 text-green-800":s.similarity>=90?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:[s.similarity,"%"]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),Xe(s)},className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"Pr√©visualiser"})]})]})},s.id))}),W().length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucun doublon trouv√© avec les crit√®res actuels"})]}),A==="isolated"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 bg-yellow-50 border-2 border-yellow-300 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-yellow-900 mb-2",children:["üîç ",S.length," individu(s) isol√©(s) d√©tect√©(s)"]}),e.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"Ces personnes n'ont ni parents ni enfants renseign√©s dans l'arbre."}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"bg-white rounded p-2",children:[e.jsx("span",{className:"text-gray-600",children:"Totalement isol√©s :"}),e.jsx("span",{className:"font-bold text-red-600 ml-2",children:S.filter(s=>s.isTotallyIsolated).length})]}),e.jsxs("div",{className:"bg-white rounded p-2",children:[e.jsx("span",{className:"text-gray-600",children:"Avec conjoints :"}),e.jsx("span",{className:"font-bold text-orange-600 ml-2",children:S.filter(s=>s.hasSpouses).length})]})]})]}),S.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex gap-3 flex-wrap",children:[e.jsx("button",{onClick:Be,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg font-medium text-sm",children:"Tout s√©lectionner"}),e.jsx("button",{onClick:Ge,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-medium text-sm",children:"Totalement isol√©s"}),e.jsx("button",{onClick:He,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium text-sm",children:"D√©s√©lectionner tout"}),e.jsxs("span",{className:"text-sm text-gray-600 py-2",children:[P.size," s√©lectionn√©(s)"]})]}),e.jsx("div",{className:"space-y-3 mb-6",children:S.map(s=>e.jsx("div",{className:`border-2 rounded-lg p-4 cursor-pointer transition-all ${P.has(s.id)?"border-yellow-500 bg-yellow-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>Ve(s.id),children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:P.has(s.id),onChange:()=>{},className:"w-5 h-5 text-yellow-600"}),e.jsx(we,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.names[0]||"Sans nom"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.birth||"?"," ",s.birthPlace?`‚Ä¢ ${s.birthPlace}`:""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.isTotallyIsolated?e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded text-xs font-medium",children:"Totalement isol√©"}):e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded text-xs font-medium",children:"Avec conjoint(s)"}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:s.id})]})]})},s.id))}),P.size>0&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsxs("button",{onClick:Ye,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-xl font-medium shadow-lg flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"}),"Supprimer ",P.size," isol√©(s)"]})})]}),S.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"‚úÖ Aucun individu isol√© d√©tect√© dans votre arbre"})]}),A==="suggestions"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 bg-purple-50 border-2 border-purple-300 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-semibold text-purple-900 mb-2",children:["ü§ñ ",L.length," suggestion(s) intelligente(s)"]}),e.jsx("p",{className:"text-sm text-purple-700",children:"L'IA analyse les patterns de votre arbre pour d√©tecter des groupes suspects de personnes portant le m√™me nom dans la m√™me p√©riode."})]}),L.length>0?e.jsx("div",{className:"space-y-4",children:L.map(s=>e.jsxs("div",{className:"border-2 border-purple-200 rounded-lg p-4 bg-purple-50/50",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"w-6 h-6 text-purple-600"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-purple-900",children:[s.name," ‚Äî ",s.count," personnes"]}),e.jsxs("p",{className:"text-sm text-purple-700",children:["P√©riode : ",s.period]})]})]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.confidence>=85?"bg-green-100 text-green-800":s.confidence>=75?"bg-yellow-100 text-yellow-800":"bg-orange-100 text-orange-800"}`,children:["Confiance : ",s.confidence,"%"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:s.reason}),e.jsxs("div",{className:"bg-white rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Personnes concern√©es :"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.people.slice(0,5).map((t,a)=>{var i;return e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded text-xs",children:[t.names[0]||t.id," ",t.birth?`(${((i=t.birth.match(/\d{4}/))==null?void 0:i[0])||"?"})`:""]},a)}),s.people.length>5&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",s.people.length-5," autres"]})]})]})]},s.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucune suggestion g√©n√©r√©e. L'IA n'a pas d√©tect√© de patterns suspects."})]}),(w.size>0||I.size>0)&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("button",{onClick:es,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-8 py-4 rounded-xl font-semibold text-lg shadow-lg flex items-center gap-3",children:[e.jsx(te,{className:"w-6 h-6"}),"Fusionner ",w.size+I.size," s√©lection(s)"]})})]}),D==="merged"&&k&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(te,{className:"w-20 h-20 md:w-24 md:h-24 mx-auto text-green-500 mb-6"}),e.jsx("h2",{className:"text-xl md:text-2xl font-semibold mb-6",children:"Op√©ration termin√©e !"}),e.jsx("div",{className:"max-w-md mx-auto bg-gray-50 rounded-lg p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.totalIndividuals}),e.jsx("p",{className:"text-sm text-gray-600",children:"Original"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[k.mergedCount||0,k.deletedCount?` + ${k.deletedCount}`:""]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Supprim√©s"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.remainingCount}),e.jsx("p",{className:"text-sm text-gray-600",children:"Restants"})]})]})}),e.jsxs("button",{onClick:ss,className:"bg-gradient-to-r from-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 text-white px-8 py-4 rounded-xl font-semibold text-lg shadow-lg flex items-center gap-3 mx-auto",children:[e.jsx(us,{className:"w-6 h-6"}),"T√©l√©charger GEDCOM nettoy√©"]})]})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>R(null),children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-indigo-600 text-white p-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Pr√©visualisation de la fusion"}),e.jsx("button",{onClick:()=>R(null),className:"text-white hover:text-gray-200 text-2xl",children:"‚úï"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:e.jsxs("p",{className:"text-sm text-blue-900",children:["L'ID ",e.jsx("span",{className:"font-mono bg-blue-100 px-2 py-0.5 rounded",children:p.keepPerson.id})," sera conserv√© (score qualit√©: ",Math.max(p.quality1,p.quality2)," points)"]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border-2 border-green-500 rounded-lg bg-green-50 p-4",children:[e.jsxs("h4",{className:"font-bold text-green-900 mb-3 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5"})," Conserv√©"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",p.keepPerson.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nom:"})," ",p.keepPerson.names[0]||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Naissance:"})," ",p.keepPerson.birth||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"D√©c√®s:"})," ",p.keepPerson.death||"N/A"]})]})]}),e.jsxs("div",{className:"border-2 border-red-500 rounded-lg bg-red-50 p-4",children:[e.jsxs("h4",{className:"font-bold text-red-900 mb-3 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"})," Supprim√©"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",p.removePerson.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Nom:"})," ",p.removePerson.names[0]||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Naissance:"})," ",p.removePerson.birth||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"D√©c√®s:"})," ",p.removePerson.death||"N/A"]})]})]})]}),e.jsxs("div",{className:"border-2 border-indigo-500 rounded-lg bg-indigo-50 p-4",children:[e.jsx("h4",{className:"font-bold text-indigo-900 mb-3",children:"üìä R√©sultat apr√®s fusion"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nom:"})," ",p.merged.names[0]||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Naissance:"})," ",p.merged.birth||"N/A"]}),p.merged.birthPlace&&e.jsxs("p",{children:[e.jsx("strong",{children:"Lieu:"})," ",p.merged.birthPlace]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"D√©c√®s:"})," ",p.merged.death||"N/A"]}),p.merged.deathPlace&&e.jsxs("p",{children:[e.jsx("strong",{children:"Lieu:"})," ",p.merged.deathPlace]}),p.merged.occupation&&e.jsxs("p",{children:[e.jsx("strong",{children:"Profession:"})," ",p.merged.occupation]})]})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 p-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>R(null),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100",children:"Fermer"}),e.jsx("button",{onClick:()=>{fe(p.original.id),R(null)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:w.has(p.original.id)?"D√©s√©lectionner":"S√©lectionner"})]})]})}),Te&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",onClick:()=>O(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-auto",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-indigo-600 to-blue-500 text-white p-4 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(gs,{className:"w-5 h-5"}),"Historique des versions"]}),e.jsx("button",{onClick:()=>O(!1),className:"text-white hover:text-gray-200 text-2xl",children:"‚úï"})]}),e.jsx("div",{className:"p-6 space-y-6",children:Ie.map((s,t)=>e.jsxs("div",{className:`border-l-4 pl-4 ${s.color==="green"?"border-green-500":s.color==="blue"?"border-blue-500":s.color==="indigo"?"border-indigo-500":s.color==="purple"?"border-purple-500":"border-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h4",{className:"font-bold text-lg",children:["v",s.version]}),s.tag&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${s.tag==="ACTUELLE"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:s.tag}),e.jsx("span",{className:"text-sm text-gray-500",children:s.date})]}),e.jsx("p",{className:"font-medium text-gray-700 mb-2",children:s.title}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:s.items.map((a,i)=>e.jsxs("li",{children:["‚Ä¢ ",a]},i))})]},t))}),e.jsx("div",{className:"sticky bottom-0 bg-gray-50 p-4 flex justify-end",children:e.jsx("button",{onClick:()=>O(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Fermer"})})]})})]})};ne.createRoot(document.getElementById("root")).render(e.jsx(ds.StrictMode,{children:e.jsx(ys,{})}));
